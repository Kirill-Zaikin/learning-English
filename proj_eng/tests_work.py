"""
Модуль для работы с тестами.

В этом модуле реализованы функции для:
- Чтения тестов из CSV файла.
- Обработки и извлечения данных из тестов.
- Записи и управления данными тестов.

Функции:
- get_tests(): Читает тесты из файла CSV и возвращает их в виде списка с индексами.
- write_tests(): Записывает тесты в CSV файл.
"""

def get_tests():
    """
    Читает данные о тестах из CSV файла и возвращает список тестов с их индексами.

    Эта функция:
    - Читает строки из файла CSV, пропуская первую строку (заголовок).
    - Пропускает строки с некорректным форматом (меньше двух частей).
    - Возвращает список, состоящий из кортежей, каждый из которых содержит:
      - Индекс строки.
      - Текст теста.
      - Страну, к которой относится тест.

    Возвращает:
        list: Список кортежей, каждый из которых состоит из:
            - Индекса теста (начиная с 1),
            - Текста теста,
            - Страны.
    
    Пример возвращаемого значения:
        [
            (1, 'Test 1 text', 'Country 1'),
            (2, 'Test 2 text', 'Country 2'),
            ...
        ]
    """
    tests = []
    with open("./data/tests.csv", "r", encoding="utf-8") as f:
        lines = f.readlines()[1:]  # Пропускаем заголовок
        for i, line in enumerate(lines, 1):
            parts = line.strip().split(";")
            if len(parts) < 2:
                continue  # пропускаем битые строки
            text, country = parts[:2]
            tests.append((i, text, country))
    return tests
